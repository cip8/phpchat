(function(e){function t(t){for(var r,o,i=t[0],u=t[1],c=t[2],f=0,m=[];f<i.length;f++)o=i[f],Object.prototype.hasOwnProperty.call(s,o)&&s[o]&&m.push(s[o][0]),s[o]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);l&&l(t);while(m.length)m.shift()();return a.push.apply(a,c||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,i=1;i<n.length;i++){var u=n[i];0!==s[u]&&(r=!1)}r&&(a.splice(t--,1),e=o(o.s=n[0]))}return e}var r={},s={app:0},a=[];function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/chat/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],u=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var l=u;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"2a73":function(e,t,n){"use strict";var r=n("8cbb"),s=n.n(r);s.a},"3dc8":function(e,t,n){},"45a2":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d");var r=n("2b0e"),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"flex flex__direction-column",attrs:{id:"app"}},[e.entered?[n("message-list"),n("div",{staticClass:"chat-controls flex margin__all-1 margin__left-3 margin__right-3"},[n("message-form",{attrs:{user_from:e.user_from}}),n("recipient",{attrs:{user_to:e.user_to}})],1)]:[e.error?n("div",{staticClass:"error-message text__center"},[e._v("\n            "+e._s(this.error)+"\n        ")]):e._e(),n("form",{staticClass:"login-form",attrs:{action:"#"},on:{submit:function(t){return t.preventDefault(),e.enterChat(t)}}},[n("fieldset",[n("label",{attrs:{for:"user_from"}},[e._v("Your username:")]),n("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.user_from,expression:"user_from",modifiers:{trim:!0}}],attrs:{type:"text",id:"user_from"},domProps:{value:e.user_from},on:{input:function(t){t.target.composing||(e.user_from=t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})]),n("fieldset",[n("label",{attrs:{for:"user_to"}},[e._v("Chat with username:")]),n("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.user_to,expression:"user_to",modifiers:{trim:!0}}],attrs:{type:"text",id:"user_to"},domProps:{value:e.user_to},on:{input:function(t){t.target.composing||(e.user_to=t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})]),e._m(0)])]],2)},a=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"text__center"},[n("button",{attrs:{type:"submit"}},[e._v("Join chat")])])}],o=new r["a"],i=new WebSocket("ws://localhost:7070"),u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("form",{staticClass:"chat-form flex flex__direction-column",attrs:{action:"#"}},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.content,expression:"content"}],staticClass:"chat-form__input",attrs:{placeholder:"Type your message"},domProps:{value:e.content},on:{keydown:e.handleInput,input:function(t){t.target.composing||(e.content=t.target.value)}}}),n("pre",{staticClass:"text__right"},[e._v("Press Shift + Enter to add a new line.")])])},c=[],l={name:"MessageForm",data:function(){return{content:""}},props:{user_from:{type:String,required:!0}},methods:{handleInput:function(e){13===e.keyCode&&!1===e.shiftKey&&(e.preventDefault(),e.stopPropagation(),this.send())},send:function(){var e={event:"message",data:{id:Date.now(),content:this.content,user_from:this.user_from}};o.$emit("message",e.data),i.send(JSON.stringify(e)),this.content=null}}},f=l,m=(n("fa94"),n("2877")),_=Object(m["a"])(f,u,c,!1,null,"125a7104",null),p=_.exports,d=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"message-list margin__all-1 margin__left-3 margin__right-3"},e._l(e.messages,function(e){return n("message",{key:e.id,attrs:{message:e}})}),1)},h=[],g=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"chat-messages__item flex",class:e.fromThisUser},[n("div",{staticClass:"chat-wrapper"},[e.message.user_from?n("div",{staticClass:"chat-wrapper__username"},[e._v("\n            @"+e._s(e.message.user_from)+":\n        ")]):e._e(),n("div",{domProps:{innerHTML:e._s(e.message.content)}})])])},v=[],b={name:"Message",props:{message:{type:Object,required:!0}},computed:{fromThisUser:function(){return this.message.user_from===o.user_from?"user-1 flex__justify-end":this.message.user_from?"user-2 flex__justify-start":"admin-notification text__center"}}},y=b,x=(n("2a73"),Object(m["a"])(y,g,v,!1,null,"504bc562",null)),w=x.exports,O={name:"MessageList",components:{Message:w},data:function(){return{messages:[]}},mounted:function(){var e=this;o.$on("history",function(t){e.messages=t}),o.$on("message",function(t){e.messages.unshift(t)})}},C=O,$=(n("efad"),Object(m["a"])(C,d,h,!1,null,"213ecfe6",null)),j=$.exports,S=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"chat-people flex flex__direction-column flex__align-center"},[n("p",[e._v("Chatting with:")]),n("p",{staticClass:"margin__all-0"},[n("span",{staticClass:"chat-people__username"},[e._v(e._s(e.user_to))]),e.online?n("span",{staticClass:"chat-people__status chat-people__status-online"},[e._v("online")]):n("span",{staticClass:"chat-people__status"},[e._v("offline")])])])},P=[],M={name:"Recipient",data:function(){return{online:!1}},props:{user_to:{type:String,required:!0}},mounted:function(){var e=this;o.$on("enter",function(t){e.online=t.username===e.user_to,t.message&&o.$emit("message",{id:Date.now(),content:"<strong>"+t.username+"</strong> "+t.message})}),o.$on("exit",function(t){e.online=t.username!==e.user_to,t.message&&o.$emit("message",{id:Date.now(),content:"<strong>"+t.username+"</strong> "+t.message})})}},E=M,k=(n("7f8e"),Object(m["a"])(E,S,P,!1,null,"e7dbafa2",null)),D=k.exports,N={name:"App",components:{MessageForm:p,MessageList:j,Recipient:D},data:function(){return this.initialState()},methods:{isOpen:function(e){return!!e&&e.readyState===e.OPEN},initialState:function(){return{user_from:null,user_to:null,entered:!1,error:null,needsRefresh:!1}},enterChat:function(){if(this.needsRefresh&&window.location.reload(),this.user_from&&this.user_to){if(!this.isOpen(i))return this.error="Chat server offline - please start it and refresh the page!",void(this.needsRefresh=!0);i.send(JSON.stringify({event:"enter",data:{user_from:this.user_from,user_to:this.user_to}})),this.error=null,this.entered=!0,o.user_from=this.user_from}else this.error="Please fill in the usernames!"},resetData:function(){Object.assign(this.$data,this.initialState())}},mounted:function(){var e=this;i.onmessage=function(e){var t=JSON.parse(e.data);o.$emit(t.event,t.data)},o.$on("error",function(t){e.resetData(),e.error=t.error})}},T=N,J=(n("c796"),Object(m["a"])(T,s,a,!1,null,null,null)),R=J.exports;r["a"].config.productionTip=!1,new r["a"]({render:function(e){return e(R)}}).$mount("#app")},"7f8e":function(e,t,n){"use strict";var r=n("45a2"),s=n.n(r);s.a},"8cbb":function(e,t,n){},"8d96":function(e,t,n){},c796:function(e,t,n){"use strict";var r=n("8d96"),s=n.n(r);s.a},ee97:function(e,t,n){},efad:function(e,t,n){"use strict";var r=n("ee97"),s=n.n(r);s.a},fa94:function(e,t,n){"use strict";var r=n("3dc8"),s=n.n(r);s.a}});
//# sourceMappingURL=app.96730192.js.map